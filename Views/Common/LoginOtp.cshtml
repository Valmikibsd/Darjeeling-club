@model ClubApp.Models.MemberLogin
@{
    ViewData["Title"] = "LoginOtp";
}

<html lang="En">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">

    <link rel="apple-touch-icon" href="/img/f7-icon-square.html">
    <link rel="icon" href="/img/f7-icon.html">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/vendor/bootstrap-4.1.3/css/bootstrap.min.css">

    <!-- Material design icons CSS -->
    <link rel="stylesheet" href="/vendor/materializeicon/material-icons.css">

    <!-- swiper carousel CSS -->
    <link rel="stylesheet" href="/vendor/swiper/css/swiper.min.css">

    <!-- app CSS -->
    <link id="theme" rel="stylesheet" href="/css/style.css" type="text/css">


    <title>Membership Number</title>
    <style type="text/css">
        .jqstooltip {
            position: absolute;
            left: 0px;
            top: 0px;
            visibility: hidden;
            background: rgb(0, 0, 0) transparent;
            background-color: rgba(0,0,0,0.6);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
            color: white;
            font: 10px arial, san serif;
            text-align: left;
            white-space: nowrap;
            padding: 5px;
            border: 1px solid white;
            z-index: 10000;
        }

        .jqsfield {
            color: white;
            font: 10px arial, san serif;
            text-align: left;
        }
    </style>
</head>

<body class="color-theme-blue">
    <div class="wrapper">
        <!-- page main start -->
        <div class="page">
            <div class="page-content h-100">
                <div class="row mx-0 h-100 justify-content-center">
                    <div class="col-12">
                        <div class="left login_arrow">
                            <a href="/Common/login" class="menu-left-close"><i class="material-icons">keyboard_arrow_left</i></a>
                        </div>
                    </div>
                    <div class="col-10 col-md-6 col-lg-4 mt-5 mx-auto text-center align-self-centers">
                        <br>
                        <br>
                        <h2 class="login-h mb-2">Generate OTP </h2>
                        <div class="login-input-content ">
                            @if (ViewBag.memid != null)
                            {
                                 <p class="login-p mb-4">Membership No: <a href="">******@ViewBag.memid</a></p>
                            }
                            @if (ViewBag.memid != null)
                            {

                                <p class="login-p mb-4">We Have Sent the Code Verification Your Email Is and registered mobile <a href="">@ViewBag.pno / @ViewBag.Email</a></p>
                            }
                           
                            <form class="form-group otp_form">
                                <input class="form-control login_input border-0 text-center otp_input" type="text" onkeyup="movetoNext(this, 'second')" id="first" maxlength="1"  pattern="[0-9]*" inputmode="numeric">
                                <input class="form-control login_input border-0 text-center otp_input" type="text" onkeyup="movetoNext(this, 'third')" id="second" maxlength="1"  pattern="[0-9]*" inputmode="numeric">
                                <input class="form-control login_input border-0 text-center otp_input" type="text" onkeyup="movetoNext(this, 'fourth')" id="third" maxlength="1" pattern="[0-9]*" inputmode="numeric">
                                <input class="form-control login_input border-0 text-center otp_input" type="text" onkeyup="lastdata()" id="fourth" maxlength="1" pattern="[0-9]*" inputmode="numeric">
                            </form>
                            <a id="btnlogin" class="btn login_btn border-0 z-3">Login</a>

                            <br>
                            <br>
                            <br>
                            <p class="login-p mb-4">Didn't Get The Code?  <br><a href="#"  id="resnd">Resend</a></p>
                        </div>
                        <br>
                        <br>
                        <div class="row no-gutters">
                            <div class="col-12 text-dark text-center">By creating passcode you agree with our <a href="" class=" mt-3">Terms &amp; Conditions and Privacy Policy</a></div>
                        </div>
                    </div>
                </div>

                <br>

            </div>

        </div>
        <!-- page main ends -->

    </div>




    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="/js/jquery-3.2.1.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/vendor/bootstrap-4.1.3/js/bootstrap.min.js"></script>


    <!-- sparklines chart jquery file -->
    <script src="/vendor/sparklines/jquery.sparkline.min.js"></script>

    <!-- Circular progress gauge jquery file -->
    <script src="/vendor/circle-progress/circle-progress.min.js"></script>

    <!-- Swiper carousel jquery file -->
    <script src="/vendor/swiper/js/swiper.min.js"></script>

    <!-- Application main common jquery file -->
    <script src="/js/main.js"></script>

    <!-- page specific script -->



</body>
</html>
<script src="@Url.Content("~/js/Common.js")"></script>
<script>

       
        $("#btnlogin").on("click", function () {
        var otp = $("#first").val() + '' + $("#second").val() + '' + $("#third").val() + '' + $("#fourth").val();
            if (otp == "") {
                alert("Please Enter Otp...!");
            } else {
                var url = '/Common/commonMethod';
                var data = {memid:'@ViewBag.memid',otp:otp,type:2,sessionid:'@ViewBag.sess'}
                VerifyLogin(url, JSON.stringify(data), "", "", "");
            }
            
        });

         $("#resnd").on("click", function () {
            //alert($("#memid").val());
            var url = '/Common/commonMethod';
            var data = {memid:'@ViewBag.memid',type:1,sessionid:'@ViewBag.sess'}
           Login(url, JSON.stringify(data), "", "", "");
        });



</script>

<script type="text/javascript">
    function movetoNext(current, nextFieldID) {
        if (current.value.length >= current.maxLength) {
            document.getElementById(nextFieldID).focus();
        }
    }

     function lastdata()
     {
        document.getElementById("btnlogin").click();
     }
</script>>

